# Configuration Guide for @medishn/gland

This guide provides a detailed overview of the configuration options available in `@medishn/gland`, allowing you to customize the behavior of your web server, routing, logging, middleware, and database query execution. These configurations can be defined in a separate configuration file, typically named `.confmodule`, and loaded into your application.

## Table of Contents

- [Configuration Guide for @medishn/gland](#configuration-guide-for-medishngland)
  - [Table of Contents](#table-of-contents)
  - [Introduction](#introduction)
  - [Basic Configuration](#basic-configuration)
  - [Configuration Options](#configuration-options)
    - [Server Configuration](#server-configuration)
      - [Example](#example)
    - [Loading Configuration](#loading-configuration)
    - [Best Practices](#best-practices)

---

## Introduction

`gland` supports both programmatic and file-based configuration to allow flexible and maintainable setups. The framework uses the `.confmodule` file for configuration, which can include details about routing, middleware, logging, and database connections. This file is loaded during server initialization.

The configuration system is designed to:

- Define paths for routes and middleware.
- Set up logging preferences (log levels, transport options, etc.).
- Configure SQL database connections for `Qiu`.
- Customize global or route-specific middleware.

## Basic Configuration

Below is an example of a basic `.confmodule` configuration file:

```
path=router
recursive=true
pattern=*.ts
cacheModules=true
logLevel=info
```

In this example:
- **`path=router`** specifies the directory where route modules are located.
- **`recursive=true`** indicates that the framework should search for route files recursively.
- **`pattern=*.ts`** sets the file pattern to match for route files.
- **`cacheModules=true`** enables module caching.
- **`logLevel=info`** sets the logging level to `info`.

## Configuration Options

The `.confmodule` file can contain several key configuration options, each affecting different parts of the application.

### Server Configuration

The server configuration controls how the web server behaves and interacts with routes and middleware. Key server settings include:

| Option            | Type    | Description                                                                           | Default Value |
|-------------------|---------|---------------------------------------------------------------------------------------|---------------|
| `path`            | String  | Specifies the directory where route modules are located.                              | `'router'`    |
| `recursive`       | Boolean | Whether to recursively search for route files in subdirectories.                      | `true`        |
| `pattern`         | String  | File pattern to match for route modules (e.g., `*.ts`, `*.js`).                        | `*.ts`        |
| `cacheModules`    | Boolean | Enables or disables caching of route and middleware modules for better performance.    | `true`        |
| `logLevel`        | String  | Defines the level of logging (`error`, `warn`, `info`, `debug`).                      | `'info'`      |

#### Example

```ini
path=router
recursive=true
pattern=*.js
cacheModules=false
logLevel=debug
```
### Loading Configuration

You can load the configuration file (`.confmodule`) in your main application file using the `load()` method.

```typescript
import gland from '@medishn/gland';
import path from 'path';

const app = new gland();

// Load configuration
app.load(path.join(__dirname, '.confmodule'));

// Initialize the server
app.init(3000, () => {
  console.log('Server running on port 3000');
});
```

### Best Practices

- **Use separate configuration files for different environments (development, production, etc.).**
  You can name them `.confmodule.dev`, `.confmodule.prod`, and load the appropriate configuration based on the environment.

- **Avoid hardcoding sensitive information** (e.g., database credentials) in your configuration files. Instead, use environment variables or a secrets management system.

- **Use the `cacheModules` option in production** to improve performance by caching route and middleware modules.
